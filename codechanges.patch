diff --git a/src/context.cpp b/src/context.cpp
index f47fc5f..550d845 100644
--- a/src/context.cpp
+++ b/src/context.cpp
@@ -459,6 +459,7 @@ namespace glimmer
             deferedRenderer->Reset();
             return *Config.renderer;
         }
+        return *Config.renderer;
     }
 
     IRenderer& WidgetContextData::GetRenderer()
diff --git a/src/im_font_manager.cpp b/src/im_font_manager.cpp
index 90fd88f..df5333b 100644
--- a/src/im_font_manager.cpp
+++ b/src/im_font_manager.cpp
@@ -19,6 +19,13 @@
 #include <fstream>
 #include <deque>
 #include <cassert>
+#include <algorithm>
+#include <climits>
+
+#ifndef _WIN32
+#define _MAX_PATH PATH_MAX
+#define strncpy_s(dest, destsz, src, count) strncpy(dest, src, count)
+#endif
 
 #include "imrichtext.h"
 #include "context.h"
diff --git a/src/layout.cpp b/src/layout.cpp
index 300ae0f..1b6a820 100644
--- a/src/layout.cpp
+++ b/src/layout.cpp
@@ -1835,7 +1835,7 @@ namespace glimmer
         case WT_Custom: {
             if (Config.customWidget != nullptr)
             {
-                const auto style = Config.customWidget->GetStyle(item.id, StyleStack);
+                const auto style = Config.customWidget->GetStyle(item.id, StyleStack[WSI_Default]);
                 UpdateGeometry(item, bbox, style);
 
                 if (render)
@@ -2227,7 +2227,7 @@ namespace glimmer
         {
             auto sz = layout.geometry.GetSize();
             auto itemidx = layout.itemidx;
-            auto gridItemIdx = reinterpret_cast<int>(context.layoutItems[itemidx].implData);
+            auto gridItemIdx = static_cast<int>(reinterpret_cast<intptr_t>(context.layoutItems[itemidx].implData));
             auto& item = GridLayoutItems[gridItemIdx];
             item.maxdim = sz;
         }
@@ -2430,7 +2430,7 @@ namespace glimmer
                 }
                 else if (layout.type == Layout::Grid)
                 {
-                    auto idx = reinterpret_cast<int16_t>(item.implData);
+                    auto idx = static_cast<int16_t>(reinterpret_cast<intptr_t>(item.implData));
                     auto bbox = GridLayoutItems[idx].bbox;
                     UpdateItemGeometry(context, bbox, item, layout);
                 }
diff --git a/src/libs/src/imrichtext.cpp b/src/libs/src/imrichtext.cpp
index fcb7ff1..5cdda43 100644
--- a/src/libs/src/imrichtext.cpp
+++ b/src/libs/src/imrichtext.cpp
@@ -2321,7 +2321,6 @@ namespace ImRichText
 
             for (auto& segment : line.Segments)
             {
-                auto& segment = line.Segments.front();
                 auto& style = _result.StyleDescriptors[segment.StyleIdx + 1];
 
                 // If complete text is already clipped, do not apply alignment
diff --git a/src/libs/src/imrichtextutils.cpp b/src/libs/src/imrichtextutils.cpp
index 4a16815..8660c1b 100644
--- a/src/libs/src/imrichtextutils.cpp
+++ b/src/libs/src/imrichtextutils.cpp
@@ -2,6 +2,7 @@
 #include "imrichtextutils.h"
 
 #include <cctype>
+#include <cstring>
 #include <unordered_map>
 
 #include "renderer.h"
diff --git a/src/platform.cpp b/src/platform.cpp
index 8cf584f..e827b77 100644
--- a/src/platform.cpp
+++ b/src/platform.cpp
@@ -19,8 +19,10 @@ static void DetermineKeyStatus(glimmer::IODescriptor& desc)
     desc.insert = GetAsyncKeyState(VK_INSERT) < 0;
 }
 #elif __linux__
-#include <ctsdio>
+#include <cstdio>
 #include <unistd.h>
+#include <string>
+#include <stdexcept>
 
 static std::string exec(const char* cmd)
 {
@@ -172,7 +174,7 @@ namespace glimmer
 
     int32_t IPlatform::ShowFileDialog(std::span<char>* out, int32_t outsz, int32_t target,
         std::string_view location, std::pair<std::string_view, std::string_view>* filters,
-        int totalFilters, const DialogProperties& props)
+        int totalFilters, const DialogProperties* props)
     {
         return 0;
     }
diff --git a/src/platform.h b/src/platform.h
index 2480705..c3913e3 100644
--- a/src/platform.h
+++ b/src/platform.h
@@ -203,8 +203,8 @@ namespace glimmer
         struct DialogProperties
         {
             std::string_view title;
-            std::string_view confirmBtnText = "OK";
-            std::string_view cancelBtnText = "Cancel";
+            std::string_view confirmBtnText;
+            std::string_view cancelBtnText;
         };
 
         friend int64_t FramesRendered();
@@ -219,7 +219,7 @@ namespace glimmer
         virtual void GetWindowHandle(void*);
         virtual int32_t ShowFileDialog(std::span<char>* out, int32_t outsz, int32_t target,
             std::string_view location, std::pair<std::string_view, std::string_view>* filters = nullptr,
-            int totalFilters = 0, const DialogProperties& props = DialogProperties{});
+            int totalFilters = 0, const DialogProperties* props = nullptr);
 
         void SetMouseCursor(MouseCursor cursor);
 
diff --git a/src/renderer.cpp b/src/renderer.cpp
index fa8a449..0f94bf0 100644
--- a/src/renderer.cpp
+++ b/src/renderer.cpp
@@ -6,6 +6,7 @@
 #include <cstdio>
 #include <charconv>
 #include <limits>
+#include <algorithm>
 
 #ifndef GLIMMER_DISABLE_GIF
 #include <chrono>
@@ -159,7 +160,7 @@ namespace glimmer
 
             auto sz = buffer.size();
             buffer.expand(bufsz);
-            std::fread(buffer.data() + sz, 1, bufsz, fptr);
+            [[maybe_unused]] auto bytes_read = std::fread(buffer.data() + sz, 1, bufsz, fptr);
             std::fclose(fptr);
             return { sz, sz + bufsz };
         }
diff --git a/src/style.cpp b/src/style.cpp
index 7fa3bc9..82ed646 100644
--- a/src/style.cpp
+++ b/src/style.cpp
@@ -2,6 +2,8 @@
 #include "context.h"
 
 #include <cctype>
+#include <cstring>
+#include <cstdio>
 #include <unordered_map>
 #include <variant>
 #include "style.h"
diff --git a/src/types.h b/src/types.h
index 767166e..95fa2b3 100644
--- a/src/types.h
+++ b/src/types.h
@@ -9,6 +9,7 @@
 #include <string_view>
 #include <optional>
 #include <vector>
+#include <tuple>
 
 #ifndef GLIMMER_DEFAULT_FONTFAMILY
 #define GLIMMER_DEFAULT_FONTFAMILY "default-font-family"
@@ -404,7 +405,7 @@ namespace glimmer
         std::pair<int, int> selection{ -1, -1 };
         std::string_view prefix, suffix;
         int32_t prefixType = RT_INVALID, suffixType = RT_INVALID;
-		std::string_view maskchar = "•";
+		std::string_view maskchar = "ï¿½";
         void (*ShowList)(const TextInputState&, ImVec2, ImVec2) = nullptr;
         float overlayHeight = FLT_MAX;
         SymbolIcon suffixIcon = SymbolIcon::None;
diff --git a/src/utils.h b/src/utils.h
index f9effdb..7078334 100644
--- a/src/utils.h
+++ b/src/utils.h
@@ -3,6 +3,7 @@
 #include <type_traits>
 #include <span>
 #include <optional>
+#include <cstdlib>
 #include <stdint.h>
 #include <assert.h>
 
diff --git a/src/widgets.cpp b/src/widgets.cpp
index 2aa28ea..0d9d508 100644
--- a/src/widgets.cpp
+++ b/src/widgets.cpp
@@ -302,6 +302,7 @@ namespace glimmer
         case glimmer::TextType::SVG: return ImVec2{ font.size, font.size };
         default: break;
         }
+        return ImVec2{0.f, 0.f};
     }
 
     template <typename StringT>
@@ -1982,7 +1983,7 @@ namespace glimmer
         auto radius = (extent.GetHeight() * 0.5f) - (2.f * extra);
         auto movement = extent.GetWidth() - (2.f * (radius + extra));
         auto moveAmount = toggle.animate ? (io.deltaTime / specificStyle.animate) * movement * (state.checked ? 1.f : -1.f) : 0.f;
-        toggle.progress += std::fabsf(moveAmount / movement);
+        toggle.progress += std::fabs(moveAmount / movement);
 
         auto center = toggle.btnpos == -1.f ? state.checked ? extent.Max - ImVec2{ extra + radius, extra + radius }
             : extent.Min + ImVec2{ radius + extra, extra + radius }
@@ -1997,8 +1998,10 @@ namespace glimmer
         {
             auto prevTCol = state.checked ? context.toggleButtonStyles[WSI_Default].top().trackColor :
                 context.toggleButtonStyles[WSI_Checked].top().trackColor;
-            auto [fr, fg, fb, fa] = DecomposeColor(prevTCol);
-            auto [tr, tg, tb, ta] = DecomposeColor(tcol);
+            auto fromColor = DecomposeColor(prevTCol);
+            auto toColor = DecomposeColor(tcol);
+            int fr = std::get<0>(fromColor), fg = std::get<1>(fromColor), fb = std::get<2>(fromColor), fa = std::get<3>(fromColor);
+            int tr = std::get<0>(toColor), tg = std::get<1>(toColor), tb = std::get<2>(toColor), ta = std::get<3>(toColor);
             tr = (int)((1.f - toggle.progress) * (float)fr + toggle.progress * (float)tr);
             tg = (int)((1.f - toggle.progress) * (float)fg + toggle.progress * (float)tg);
             tb = (int)((1.f - toggle.progress) * (float)fb + toggle.progress * (float)tb);
@@ -2255,7 +2258,7 @@ namespace glimmer
 
     static ImRect SpinnerBounds(int32_t id, const SpinnerState& state, IRenderer& renderer, const ImRect& extent)
     {
-        auto digits = (int)(std::ceilf(std::log10f(state.max) + 1.f)) + (!state.isInteger ? state.precision + 1 : 0);
+        auto digits = (int)(std::ceil(std::log10(state.max) + 1.0)) + (!state.isInteger ? state.precision + 1 : 0);
         auto& context = GetContext();
         const auto style = context.GetStyle(state.state, state.id);
 
@@ -2264,7 +2267,7 @@ namespace glimmer
         memset(buffer, '0', digits);
         buffer[digits] = 0;
 
-        std::string_view text{ buffer, (size_t)digits };
+        std::string_view text(buffer, (size_t)digits);
         auto txtsz = renderer.GetTextSize(text, style.font.font, style.font.size);
         ImRect result;
         result.Min = extent.Min;
@@ -3128,7 +3131,7 @@ namespace glimmer
                 {
                     auto posx = mousepos.x - content.Min.x;
                     if (input.selectionStart == -1.f) input.selectionStart = posx;
-                    else if ((std::fabsf(input.selectionStart - posx) > 5.f) || input.isSelecting)
+                    else if ((std::fabs(input.selectionStart - posx) > 5.f) || input.isSelecting)
                     {
                         if (state.selection.first == -1)
                         {
@@ -3159,7 +3162,7 @@ namespace glimmer
                             {
                                 if ((prevpos < input.caretpos) && (input.pixelpos[input.caretpos - 1] - input.scroll.state.pos.x > content.GetWidth()))
                                 {
-                                    auto width = std::fabsf(input.pixelpos[input.caretpos - 1] - (input.caretpos > 1 ? input.pixelpos[input.caretpos - 2] : 0.f));
+                                    auto width = std::fabs(input.pixelpos[input.caretpos - 1] - (input.caretpos > 1 ? input.pixelpos[input.caretpos - 2] : 0.f));
                                     input.moveRight(width);
                                 }
                             }
@@ -3167,7 +3170,7 @@ namespace glimmer
                             {
                                 if (prevpos > input.caretpos && (input.pixelpos[input.caretpos - 1] - input.scroll.state.pos.x < 0.f))
                                 {
-                                    auto width = std::fabsf(input.pixelpos[prevpos - 1] - (prevpos > 1 ? input.pixelpos[prevpos - 2] : 0.f));
+                                    auto width = std::fabs(input.pixelpos[prevpos - 1] - (prevpos > 1 ? input.pixelpos[prevpos - 2] : 0.f));
                                     input.moveLeft(width);
                                 }
                             }
@@ -3182,7 +3185,7 @@ namespace glimmer
                     auto posx = mousepos.x - content.Min.x;
 
                     // This means we have clicked, not selecting text
-                    if (std::fabsf(input.selectionStart - posx) < 5.f)
+                    if (std::fabs(input.selectionStart - posx) < 5.f)
                     {
                         auto it = std::lower_bound(input.pixelpos.begin(), input.pixelpos.end(), posx + input.scroll.state.pos.x);
                         auto idx = it - input.pixelpos.begin();
@@ -3279,7 +3282,7 @@ namespace glimmer
 
                             if (prevpos > input.caretpos && (input.pixelpos[input.caretpos - 1] - input.scroll.state.pos.x < 0.f))
                             {
-                                auto width = std::fabsf(input.pixelpos[prevpos - 1] - (prevpos > 1 ? input.pixelpos[prevpos - 2] : 0.f));
+                                auto width = std::fabs(input.pixelpos[prevpos - 1] - (prevpos > 1 ? input.pixelpos[prevpos - 2] : 0.f));
                                 input.moveLeft(width);
                             }
                         }
@@ -3306,7 +3309,7 @@ namespace glimmer
 
                             if ((prevpos < input.caretpos) && (input.pixelpos[input.caretpos - 1] - input.scroll.state.pos.x > content.GetWidth()))
                             {
-                                auto width = std::fabsf(input.pixelpos[input.caretpos - 1] - (input.caretpos > 1 ? input.pixelpos[input.caretpos - 2] : 0.f));
+                                auto width = std::fabs(input.pixelpos[input.caretpos - 1] - (input.caretpos > 1 ? input.pixelpos[input.caretpos - 2] : 0.f));
                                 input.moveRight(width);
                             }
                         }
@@ -4713,7 +4716,7 @@ namespace glimmer
             {
                 ImVec2 center{ tab.pin.Min.x + (tab.pin.GetWidth() * 0.5f), tab.pin.Min.y +
                     (tab.pin.GetHeight() * 0.5f) };
-                auto radius = (1.f / std::sqrtf(2)) * tab.pin.GetWidth();
+                auto radius = (1.f / std::sqrt(2)) * tab.pin.GetWidth();
                 renderer.DrawCircle(center, radius, specificStyle.pinbgcolor, true);
             }
             else
@@ -4731,7 +4734,7 @@ namespace glimmer
             {
                 ImVec2 center{ tab.close.Min.x + (tab.close.GetWidth() * 0.5f), tab.close.Min.y +
                     (tab.close.GetHeight() * 0.5f) };
-                auto radius = (1.f / std::sqrtf(2)) * tab.close.GetWidth();
+                auto radius = (1.f / std::sqrt(2)) * tab.close.GetWidth();
                 renderer.DrawCircle(center, radius, specificStyle.closebgcolor, true);
             }
             else
@@ -8402,7 +8405,7 @@ namespace glimmer
         case WT_Custom: {
             if (Config.customWidget != nullptr)
             {
-                const auto style = Config.customWidget->GetStyle(wid, WidgetContextData::StyleStack);
+                const auto style = Config.customWidget->GetStyle(wid, WidgetContextData::StyleStack[WSI_Default]);
 
                 if (nestedCtx.source == NestedContextSourceType::Layout && !context.layoutStack.empty())
                 {
